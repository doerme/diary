# IPC

node 里面的进程父进程生成子进程的顺序是先生成一个 IPC 通道，它的原理就是通过 pipe， 在不同平台依赖不同的底层方法，window 和 *inx 有不同的方法来创建通道。
父进程在创建出 IPC 通道之后，通过一个全局变量来通知子进程监听 IPC：
```
parent----生成-----------child           
  |                       |
  |--监听--IPC----监听-----|
```
然后通信就通过 message 事件和 send 方法。如果你不是 node 进程，是无法实现进程间通信的，除非其他进程也依照规则监听 IPC 指定的端口。但是这样通过 send 方法无法满足我们传递数据的需要，因为我们通常会使用一个主进程来启动若干个工作进程，但是工作进程又不能监听同一个端口，这样会报错，因为一个端口只能被一个进程占用，所以通常是主进程监听比如 80 端口，然后将请求分发给监听不同端口的子进程。


