# HTTP redirect

重定向与负载均衡是共存的， 重定向部署一般都带有某些形式的负载均衡。对于客户端来说，服务器，代理，网关，缓存都是服务端，一般来说重定向会将客户端的请求重定向到压力最小的服务器上去，就像将所有需要加油的车移动到最近的加油站去。代理缓存就会避免建立一条昂贵代价的路径到服务器上去。

## HTTP redirect
客户端首先发送一个请求到代理服务器上，代理服务器会发送一个重定向（302,301..）请求给客户端，客户端使用重定向请求提供的域名重新发送一个请求， 这样可以做一点简单的负载均衡，但是使用 HTTP 重定向有几个缺点：1.如果提供重定向的服务器出现故障，那么整个服务就会奔溃，2.客户端增加了往返时延，因为多了一次请求，3. 为了计算最小负荷的服务器，所需要的计算量可能与直接提供页面的计算量一样。

## DNS redirect
使用 DNS 解析程序，这个程序可以是本地的 DNS 解析程序也可以使用远程的 DNS 服务器，将关联到一个域的 IP 地址经过简单的（轮询）或是复杂的（计算）计算之后得出最小负载的服务器，然后返回这个服务器的　IP 地址。
可以使用最简单的 DNS 轮转方法，也就是在服务器集群上，简单地根据访问次序来返回物理服务器地址。不考虑服务器与客户端之间的距离问题。
但是这个方法的缺点在于有可能会被缓存，我们知道 DNS 是会有 DNS 缓存的，也就是说在一个客户端上，它有可能会长时间连接到同一个服务器上，简单的轮询无法均衡单个客户端的请求，但是可以比较好的均衡多个客户端的请求。
如果是使用算法则可以使用 最小负载算法（将最小负载的服务器放到前面去），故障屏蔽（通过监听网络将出现故障的服务器的地址屏蔽掉（绕过）），邻接路由算法（返回距离客户端最近的服务器的地址）
运行着这些算法的 DNS 服务器是在内容提供者管理下的一个 DNS 权威服务器，但是权威服务器在做 DNS 负载均衡的时候是使用本地 DNS 服务器的地址而不是使用客户端的 IP 地址。

## route redirect
使用任播寻址，也就是说将多台服务器的 IP 地址都标记为同一个 IP 地址，然后向路由器网络广告自己是一个路由器。web 服务器会通过路由通信协议，与周边的骨干路由器通信，当客户端的请求来的的时候，将请求转发到离客户端最近的那个服务器上。

## IP mac redirect
也就是说通过设置离客户端最近的那个交换机，设置将来自某个 mac 地址的某个端口的数据（比如来自 80 端口）全部转发到一个代理缓存服务器上，其他数据就还是按原来传输，然后代理服务器就负责缓存新鲜度检查，如果过期则向原服务器请求新的文件。

## IP redirect
在交换机的上游添加代理将目标 IP 地址转化为目标代理的 IP 地址，这样就可以将客户端的请求全部转发到代理上去，但是如果使用全替换（源 IP 地址更换成代理的 IP 地址）这样服务器会不知道客户端的 IP， 但是如果使用半替换（也就是保留客户端 IP）这样需要对客户端与服务端之间的网络有一定的控制。

## Porxy redirect

## cache redirect
