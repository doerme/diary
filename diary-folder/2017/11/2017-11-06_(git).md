# git

git 分支管理, git 原理上是使用文件通过计算 hash 值然后保存文件的快照.使用 git commit 新建一个提交对象的时候, git 会计算每个子目录的校验和, 然后保存为 
tree 对象, 然后提交对象除了提交信息之外, 还有指向那个 tree 对象的指针, 用于重现文件.
而且下一个提交对象往往会保存上一个提交对象的指针.
而分支, 所谓分支就是一个指向 commit 对象的指针, git 会将 master 作为分支默认名字, 其实你已经有了一个分支了, 每次提交会自动向前移动.
而新建分支就是通过:
```
git branch testing
```
这样会在当前 commit 对象上新建一个分支. 而 HEAD 是一个特别的指针, 它指向目前的工作分支, git branch 只是新建一个分支, 并不会自动切换过去.
如果要切换则需要 git checkout.
当我们在一个分支上做了修改, 然后 commit, 那么在比如 tesing 分支就会比 master 多一个 commit 对象, 而 head 则指向目前新的 commit 对象, 那么如果使用 checkout,
就会将 head 指针指向回 master: git checkout master, 达到改变或者取消在 tesing 的修改, 这样可以向另外一个方向开发.
```
                       HEAD
                        |
                      master
                        |
hash1 <--- hash2 <--- hash3 <--- hash4
                                   |
                                   tesing
```
所以那些改变因为在不同的分支, 那也就是不同的方向, 改变是孤立起来的, 在时机成熟的时候再合并起来.
分支是很廉价的, 因为它仅仅也就是一个 40 字节的文件, 所以销毁与创建很廉价也很快速, 在合并的时候只需要找一个共同的基础(祖先), 因为 commit 会包含前一个祖先的信息, 只需要找一个共同
祖先就可以合并起来了.